<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ECE297 Storage Server: storage.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>storage.h</h1>  </div>
</div>
<div class="contents">
<a href="storage_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00012"></a>00012 <span class="preprocessor">#ifndef STORAGE_H</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#define STORAGE_H</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">// Configuration constants.</span>
<a name="l00018"></a><a class="code" href="storage_8h.html#a7186273cd88640b740b6333cd98ae243">00018</a> <span class="preprocessor">#define MAX_CONFIG_LINE_LEN 1024 ///&lt; Max characters in each config file line.</span>
<a name="l00019"></a><a class="code" href="storage_8h.html#a6c4647395896246d6710ba980c31666c">00019</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_USERNAME_LEN 64     ///&lt; Max characters of server username.</span>
<a name="l00020"></a><a class="code" href="storage_8h.html#aa13f93b74a500b0fd36cf2fd2fa5f30b">00020</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_ENC_PASSWORD_LEN 64 ///&lt; Max characters of server&#39;s encrypted password.</span>
<a name="l00021"></a><a class="code" href="storage_8h.html#aa746ad89d7f59a152f37e3529057bd58">00021</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_HOST_LEN 64         ///&lt; Max characters of server hostname.</span>
<a name="l00022"></a><a class="code" href="storage_8h.html#a374d6c9cec689b490a1c753145379723">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_PORT_LEN 8          ///&lt; Max characters of server port.</span>
<a name="l00023"></a><a class="code" href="storage_8h.html#abdd33f362ae3bbdacb5de76473aa8a2f">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_PATH_LEN 256        ///&lt; Max characters of data directory path.</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="comment">// Storage server constants.</span>
<a name="l00026"></a><a class="code" href="storage_8h.html#a6f4cdd0162e9f2ab251fa5b23410c8da">00026</a> <span class="preprocessor">#define MAX_TABLES 100          ///&lt; Max tables supported by the server.</span>
<a name="l00027"></a><a class="code" href="storage_8h.html#ad02d7128cbc04a5ec5ee79c6beb66730">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_RECORDS_PER_TABLE 1000 ///&lt; Max records per table.</span>
<a name="l00028"></a><a class="code" href="storage_8h.html#ae7854bc280576d57ec5c80995d5ea94c">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_TABLE_LEN 20        ///&lt; Max characters of a table name.</span>
<a name="l00029"></a><a class="code" href="storage_8h.html#ad91bfaf106e42aa552f1605c5b8a9ef2">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_KEY_LEN 20          ///&lt; Max characters of a key name.</span>
<a name="l00030"></a><a class="code" href="storage_8h.html#a053b7859476cc9867ec62c49e68d3fa1">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_CONNECTIONS 10      ///&lt; Max simultaneous client connections.</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="comment">// Extended storage server constants.</span>
<a name="l00033"></a><a class="code" href="storage_8h.html#a2c806bc7de304d1d07bb12c9d58dbdd1">00033</a> <span class="preprocessor">#define MAX_COLUMNS_PER_TABLE 10 ///&lt; Max columns per table.</span>
<a name="l00034"></a><a class="code" href="storage_8h.html#a5cced553ee7679aebe25952d79c7b86b">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_COLNAME_LEN 20      ///&lt; Max characters of a column name.</span>
<a name="l00035"></a><a class="code" href="storage_8h.html#ab9cbe6531d78ffac767508924ec1b5ac">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_STRTYPE_SIZE 40     ///&lt; Max SIZE of string types.</span>
<a name="l00036"></a><a class="code" href="storage_8h.html#a00a29850f2b5b985f776f864d83e5ac3">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_VALUE_LEN 800       ///&lt; Max characters of a value.</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a>00038 <span class="comment">// Error codes.</span>
<a name="l00039"></a><a class="code" href="storage_8h.html#ad633b9edd00d2bf59ace1af24cc483f4">00039</a> <span class="preprocessor">#define ERR_INVALID_PARAM 1             ///&lt; A parameter is not valid.</span>
<a name="l00040"></a><a class="code" href="storage_8h.html#aeef6b01ffc4d49ae7b4a2e17eefb4ade">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_CONNECTION_FAIL 2           ///&lt; Error connecting to server.</span>
<a name="l00041"></a><a class="code" href="storage_8h.html#ab03e83c2f65be8b009eff331f370058d">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_NOT_AUTHENTICATED 3         ///&lt; Client not authenticated.</span>
<a name="l00042"></a><a class="code" href="storage_8h.html#a3ff770fb1d0d1d37b43e6a27f85a7cd1">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_AUTHENTICATION_FAILED 4     ///&lt; Client authentication failed.</span>
<a name="l00043"></a><a class="code" href="storage_8h.html#ab1c0830c9f58e53bf4a9ff593a24b761">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_TABLE_NOT_FOUND 5           ///&lt; The table does not exist.</span>
<a name="l00044"></a><a class="code" href="storage_8h.html#afd0cce588bf32d57085d8d0a28bd8e34">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_KEY_NOT_FOUND 6             ///&lt; The key does not exist.</span>
<a name="l00045"></a><a class="code" href="storage_8h.html#a60d04c865fd58d86758894edca38bf30">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_UNKNOWN 7                   ///&lt; Any other error.</span>
<a name="l00046"></a><a class="code" href="storage_8h.html#a31edc5f52b2c941d356fda0e409272ef">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define ERR_TRANSACTION_ABORT 8         ///&lt; Transaction abort error.</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 
<a name="l00054"></a><a class="code" href="structstorage__record.html">00054</a> <span class="keyword">struct </span><a class="code" href="structstorage__record.html" title="Encapsulate the value associated with a key in a table.">storage_record</a> {
<a name="l00056"></a><a class="code" href="structstorage__record.html#a114ea83d63789debe24f3857f8222933">00056</a>         <span class="keywordtype">char</span> <a class="code" href="structstorage__record.html#a114ea83d63789debe24f3857f8222933" title="This is where the actual value is stored.">value</a>[MAX_VALUE_LEN];
<a name="l00057"></a>00057 
<a name="l00059"></a><a class="code" href="structstorage__record.html#ab9bb60cfd2dc26f6a49218d6b8612dca">00059</a>         uintptr_t <a class="code" href="structstorage__record.html#ab9bb60cfd2dc26f6a49218d6b8612dca" title="A place to put any extra data.">metadata</a>[8];
<a name="l00060"></a>00060 };
<a name="l00061"></a>00061 
<a name="l00073"></a>00073 <span class="keywordtype">void</span>* <a class="code" href="storage_8c.html#abc3751ffba629aad5a4b8c7c22a75e11" title="Establish a connection to the server.">storage_connect</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *hostname, <span class="keyword">const</span> <span class="keywordtype">int</span> port);
<a name="l00074"></a>00074 
<a name="l00085"></a>00085 <span class="keywordtype">int</span> <a class="code" href="storage_8c.html#aa97b5545b3eefb5055a4e6febd375796" title="This is the authentication function, this function will send the client information to the server and...">storage_auth</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *username, <span class="keyword">const</span> <span class="keywordtype">char</span> *passwd, <span class="keywordtype">void</span> *conn);
<a name="l00086"></a>00086 
<a name="l00105"></a>00105 <span class="keywordtype">int</span> <a class="code" href="storage_8c.html#ac75689ee50898a2f6580c6489e886b59" title="This is just a minimal stub implementation. You should modify it according to your design...">storage_get</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structtable.html">table</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">struct</span> <a class="code" href="structstorage__record.html" title="Encapsulate the value associated with a key in a table.">storage_record</a> 
<a name="l00106"></a>00106                 *record, <span class="keywordtype">void</span> *conn);
<a name="l00107"></a>00107 
<a name="l00127"></a>00127 <span class="keywordtype">int</span> <a class="code" href="storage_8c.html#a8a42f72670cdcd7bf83416df1f1b090d" title="This is just a minimal stub implementation. You should modify it according to your design...">storage_set</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structtable.html">table</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">struct</span> <a class="code" href="structstorage__record.html" title="Encapsulate the value associated with a key in a table.">storage_record</a> 
<a name="l00128"></a>00128                 *record, <span class="keywordtype">void</span> *conn);
<a name="l00129"></a>00129 
<a name="l00152"></a>00152 <span class="keywordtype">int</span> <a class="code" href="storage_8c.html#af4e09b41d2bc5b8c25936fe952e748b2" title="Query the table for records, and retrieve the matching keys.">storage_query</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structtable.html">table</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *predicates, <span class="keywordtype">char</span> **keys, 
<a name="l00153"></a>00153                 <span class="keyword">const</span> <span class="keywordtype">int</span> max_keys, <span class="keywordtype">void</span> *conn);
<a name="l00154"></a>00154 
<a name="l00165"></a>00165 <span class="keywordtype">int</span> <a class="code" href="storage_8c.html#acd449536193542befbae2ff5e916f657" title="This is just a minimal stub implementation. You should modify it according to your design...">storage_disconnect</a>(<span class="keywordtype">void</span> *conn);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Mar 26 2013 22:10:55 for ECE297 Storage Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
